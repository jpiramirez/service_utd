<?xml version="1.0"?>

<!-- xh = 0.2571, yh = 0.4571 -->
<!-- x = [-1.5000   -0.9857   -0.4714    0.0429    0.5571    1.0714] -->
<!-- y = [-2.0000   -1.0857   -0.1714    0.7429    1.6571] -->

<launch> 
  <node pkg="vicon_bridge" type="vicon_bridge" name="vicon" output="screen">
		<param name="stream_mode" value="ClientPull" type="str" />
		<param name="datastream_hostport" value="192.168.45.101:801" type="str" />
		<!--param name="datastream_hostport" value="vicon:801" type="str" /-->
		<param name="tf_ref_frame_id" value="/world" type="str" />
  </node>
  
  <node name="drone_odom" pkg="service_utd" type="drone_odom" respawn="true" />
  
  <!-- The ardrone node has to be running and the downward camera selected 
  <node name="ardrone_driver" pkg="service_utd" type="drone_odom" respawn="true" />
  -->
  
  <param name="/targetdetect/camera_info_url" value="$(find service_utd)/calibration.yml" /> 
  <param name="/targetdetect/color" value="0 255 0" type="str" />  
  <node name="targetdetector" pkg="service_utd" type="targetdetector" respawn="true" >
    <remap from="image" to="/ardrone/bottom/image_raw" />
  </node>
  
  <node name="joy_node" pkg="joy" type="joy_node" respawn="true"/>
  
  <node name="drone_joystick" pkg="service_utd" type="joy2drone.py" respawn="true" />
  
  <node name="drone_setpoint" pkg="service_utd" type="drone_setpoint" respawn="true" />
  
  
  
  <param name="/waypointNav" value="true" type="bool" />
  <!--param name="/waypoints/y" value="-1 1 1 -1 -1 1" /-->
  <!--param name="/waypoints/y" value="-1.5429   -1.4429   -1.3429   -1.2429   -1.1429   -1.0429   -0.9429   -0.8429   -0.7429   -0.6429   -0.5429   -0.4429   -0.3429 -0.2429   -0.1429   -0.0429    0.0571    0.1571    0.2571    0.3571    0.4571    0.5571    0.6571    0.7571    0.8571    0.9571 1.0571    1.1571    1.2571    1.3571    1.4571  1.5571 1.5571    1.4571    1.3571    1.2571    1.1571    1.0571    0.9571    0.8571    0.7571    0.6571    0.5571    0.4571    0.3571 0.2571    0.1571    0.0571   -0.0429   -0.1429   -0.2429   -0.3429   -0.4429   -0.5429   -0.6429   -0.7429   -0.8429   -0.9429 -1.0429   -1.1429   -1.2429   -1.3429   -1.4429   -1.5429 -1.5429   -1.4429   -1.3429   -1.2429   -1.1429   -1.0429   -0.9429   -0.8429   -0.7429   -0.6429   -0.5429   -0.4429   -0.3429 -0.2429   -0.1429   -0.0429    0.0571    0.1571    0.2571    0.3571    0.4571    0.5571    0.6571    0.7571    0.8571    0.9571 1.0571    1.1571    1.2571    1.3571    1.4571  1.5571 1.5571    1.4571    1.3571    1.2571    1.1571    1.0571    0.9571    0.8571    0.7571    0.6571    0.5571    0.4571    0.3571 0.2571    0.1571    0.0571   -0.0429   -0.1429   -0.2429   -0.3429   -0.4429   -0.5429   -0.6429   -0.7429   -0.8429   -0.9429 -1.0429   -1.1429   -1.2429   -1.3429   -1.4429   -1.5429 -1.5429   -1.4429   -1.3429   -1.2429   -1.1429   -1.0429   -0.9429   -0.8429   -0.7429   -0.6429   -0.5429   -0.4429   -0.3429 -0.2429   -0.1429   -0.0429    0.0571    0.1571    0.2571    0.3571    0.4571    0.5571    0.6571    0.7571    0.8571    0.9571 1.0571    1.1571    1.2571    1.3571    1.4571  1.5571 1.5571    1.4571    1.3571    1.2571    1.1571    1.0571    0.9571    0.8571    0.7571    0.6571    0.5571    0.4571    0.3571 0.2571    0.1571    0.0571   -0.0429   -0.1429   -0.2429   -0.3429   -0.4429   -0.5429   -0.6429   -0.7429   -0.8429   -0.9429 -1.0429   -1.1429   -1.2429   -1.3429   -1.4429   -1.5429 -1.5429   -1.4429   -1.3429   -1.2429   -1.1429   -1.0429   -0.9429   -0.8429   -0.7429   -0.6429   -0.5429   -0.4429   -0.3429 -0.2429   -0.1429   -0.0429    0.0571    0.1571    0.2571    0.3571    0.4571    0.5571    0.6571    0.7571    0.8571    0.9571 1.0571    1.1571    1.2571    1.3571    1.4571  1.5571 1.5571    1.4571    1.3571    1.2571    1.1571    1.0571    0.9571    0.8571    0.7571    0.6571    0.5571    0.4571    0.3571 0.2571    0.1571    0.0571   -0.0429   -0.1429   -0.2429   -0.3429   -0.4429   -0.5429   -0.6429   -0.7429   -0.8429   -0.9429 -1.0429   -1.1429   -1.2429   -1.3429   -1.4429   -1.5429 -1.5429   -1.4429   -1.3429   -1.2429   -1.1429   -1.0429   -0.9429   -0.8429   -0.7429   -0.6429   -0.5429   -0.4429   -0.3429 -0.2429   -0.1429   -0.0429    0.0571    0.1571    0.2571    0.3571    0.4571    0.5571    0.6571    0.7571    0.8571    0.9571 1.0571    1.1571    1.2571    1.3571    1.4571  1.5571 1.5571    1.4571    1.3571    1.2571    1.1571    1.0571    0.9571    0.8571    0.7571    0.6571    0.5571    0.4571    0.3571 0.2571    0.1571    0.0571   -0.0429   -0.1429   -0.2429   -0.3429   -0.4429   -0.5429   -0.6429   -0.7429   -0.8429   -0.9429 -1.0429   -1.1429   -1.2429   -1.3429   -1.4429   -1.5429 -1.5429   -1.4429   -1.3429   -1.2429   -1.1429   -1.0429   -0.9429   -0.8429   -0.7429   -0.6429   -0.5429   -0.4429   -0.3429 -0.2429   -0.1429   -0.0429    0.0571    0.1571    0.2571    0.3571    0.4571    0.5571    0.6571    0.7571    0.8571    0.9571 1.0571    1.1571    1.2571    1.3571    1.4571  1.5571 1.5571    1.4571    1.3571    1.2571    1.1571    1.0571    0.9571    0.8571    0.7571    0.6571    0.5571    0.4571    0.3571 0.2571    0.1571    0.0571   -0.0429   -0.1429   -0.2429   -0.3429   -0.4429   -0.5429   -0.6429   -0.7429   -0.8429   -0.9429 -1.0429   -1.1429   -1.2429   -1.3429   -1.4429   -1.5429" /-->
  <!-- param name="/waypoints/x" value="1 1 0 0 -1 -1" / -->
  <!--param name="/waypoints/x" value="-1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.8429 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.5287 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -1.2145 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.9003 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.5861 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719 -0.2719  0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.0423 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.3565 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.6707 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 0.9849 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.2991 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 1.6133 "  /-->
  <!--param name="/waypoints/z" value="1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1" /-->
    <param name="/waypoints/y" value="-1.5429  0   1.5429  1.5429   0   -1.5429 -1.5429  0   1.5429  1.5429   0  -1.5429 -1.5429 0     1.5429  1.5429   0  -1.5429 -1.5429    0   1.5429  1.5429   0   -1.5429 -1.5429   0   1.5429  1.5429  0 -1.5429 -1.5429  0 1.5429  1.5429 0   -1.5429 -1.5429   0  1.5429" />
  <!-- param name="/waypoints/x" value="1 1 0 0 -1 -1" / -->
  <param name="/waypoints/x" value="-1.8429 -1.8429 -1.8429 -1.5287 -1.5287 -1.5287 -1.2145 -1.2145 -1.2145 -0.9003 -0.9003 -0.9003  -0.5861 -0.5861 -0.5861 -0.2719 -0.2719 -0.2719 0.0423 0.0423 0.0423 0.3565 0.3565 0.3565 0.6707 0.6707 0.6707 0.9849 0.9849 0.9849  1.2991 1.2991 1.2991 1.6133 1.6133 1.6133 1.8704 1.8704 1.8704"  />
  <param name="/waypoints/z" value="1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1" />
  <param name="/alpha" value="0.769634" />
  <param name="/beta" value="0.158924" />
  <node name="drone_waypoint_nav" pkg="service_utd" type="infocontroller" respawn="true" output="screen"/>
</launch>
